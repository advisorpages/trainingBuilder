# Story 4.6: Coaching Tip Curation (New)

## Status
Completed

## Story
**As a** Trainer,
**I want** to curate and manage AI-generated coaching tips for my sessions,
**so that** I can organize, archive, and maintain a personalized collection of coaching guidance that improves over time.

## Story Context

**Existing System Integration:**

- Integrates with: AI coaching tips generation (Story 4.4), session detail view, coaching tip management
- Technology: React frontend with TypeScript, NestJS backend API, coaching tip status management
- Follows pattern: Content curation and management patterns from existing interfaces
- Touch points: SessionCoachingTip entity, status management, trainer preferences

## Acceptance Criteria

**Functional Requirements:**

1. Trainer can view all coaching tips associated with a specific session
2. Trainer can change coaching tip status (generated, curated, archived)
3. Tips display generation timestamp and current status
4. Trainer can organize tips by category and difficulty level
5. Archived tips are hidden from main view but remain accessible
6. Curated tips are highlighted as trainer-approved recommendations

**Status Management Requirements:**

7. Tips start with "generated" status when first created by AI
8. Trainer can promote tips to "curated" status for preferred recommendations
9. Trainer can archive tips that are not relevant or useful
10. Status changes are tracked with timestamps and trainer attribution

**Interface Requirements:**

11. Coaching tip curation integrated within session detail coaching tips tab
12. Clear visual indicators for tip status (generated, curated, archived)
13. Easy-to-use status change controls (buttons or dropdowns)
14. Filtering options to view tips by status or category

**Data Management Requirements:**

15. Status changes persist across trainer dashboard sessions
16. Tip curation data associated with specific trainer-session combinations
17. Original tip content preserved regardless of status changes
18. Curation history maintained for tip management tracking

## Technical Notes

- **Integration Approach:** Extend coaching tips interface with status management and curation controls
- **Existing Pattern Reference:** Follow content management patterns from existing admin interfaces
- **Key Constraints:** Must maintain tip integrity; track curation history; intuitive status management

## Definition of Done

- [x] Coaching tip status management system implemented
- [x] Status change controls integrated into coaching tips interface
- [x] Visual indicators for tip status (generated, curated, archived)
- [x] Filtering options for viewing tips by status
- [x] Status change persistence and tracking working
- [x] Curation interface integrated with session detail view
- [x] Tip content preservation regardless of status changes
- [x] User-friendly curation workflow for trainers

## Tasks / Subtasks

- [x] Task 1: Status Management System (AC: 1-3, 7-10)
  - [x] Implement coaching tip status enum and database fields
  - [x] Create status change API endpoints with trainer attribution
  - [x] Add status tracking with timestamps and change history
  - [x] Implement status validation and business logic

- [x] Task 2: Curation Interface (AC: 11-14)
  - [x] Add status management controls to coaching tips display
  - [x] Create visual indicators for different tip statuses
  - [x] Implement filtering options for viewing tips by status
  - [x] Design intuitive status change workflow for trainers

- [x] Task 3: Data Persistence & Management (AC: 15-18)
  - [x] Ensure status changes persist across dashboard sessions
  - [x] Associate curation data with specific trainer-session combinations
  - [x] Preserve original tip content regardless of status changes
  - [x] Implement curation history tracking for management purposes

- [x] Task 4: Integration & User Experience (AC: 4-6)
  - [x] Integrate curation functionality within existing coaching tips tab
  - [x] Implement tip organization by category and difficulty level
  - [x] Handle archived tips visibility and accessibility
  - [x] Highlight curated tips as trainer-approved recommendations

## Dev Notes

### Integration Requirements
[Source: SessionCoachingTip entity, coaching tips generation, session detail view]

**Required Data Integrations:**
- SessionCoachingTip entity with status field and change tracking
- Coaching tip display and management within session detail interface
- Trainer attribution for status changes and curation decisions
- Integration with existing coaching tips generation workflow

**Status Management System:**
**Status Types:**
- Generated: Initial status when tip is created by AI
- Curated: Trainer-approved and recommended for use
- Archived: Hidden from main view but preserved

**Status Change Operations:**
- Promote generated tips to curated status
- Archive tips that are not relevant or useful
- Restore archived tips if needed
- Track change history with timestamps and trainer ID

**Curation Interface Elements:**
- Status indicator badges or icons
- Status change buttons or dropdown controls
- Filtering options (All, Generated, Curated, Archived)
- Category and difficulty level organization

### Existing System Context
**Coaching Tips Management Patterns:**
- Integration with existing coaching tips display interface
- Consistent styling with session detail view tabs
- User-friendly controls following existing admin interface patterns
- Status management similar to session status workflows

**Session Detail Integration:**
- Seamless integration within coaching tips tab
- Consistent navigation and interaction patterns
- Integration with tip generation and display functionality

### Success Criteria
The story is successful when Trainers can effectively curate their coaching tips, organizing them into personalized collections that improve their training preparation over time.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-17 | 1.0 | Initial story creation for coaching tip curation | BMad Master |
| 2025-09-17 | 1.1 | Story implementation completed - coaching tip curation fully functional | Claude Code |

## Dev Agent Record

### Agent Model Used
Claude Code powered by Sonnet 4 (claude-sonnet-4-20250514)

### Completion Notes List
- Complete coaching tip curation system implemented
- Status management for generated, curated, and archived tips
- Visual indicators and controls for status changes integrated into coaching tips interface
- Status change persistence and tracking with trainer attribution
- Integration with existing coaching tips generation and display workflow
- Filtering options for viewing tips by status and category
- Tip content preservation regardless of status changes
- User-friendly curation workflow within session detail view

### File List
- packages/backend/src/entities/session-coaching-tip.entity.ts (status field and enum)
- packages/backend/src/modules/trainer-dashboard/trainer-dashboard.service.ts (curation logic)
- packages/backend/src/modules/trainer-dashboard/trainer-dashboard.controller.ts (curation API endpoints)
- packages/frontend/src/pages/TrainerSessionDetailPage.tsx (curation interface integration)

## QA Results
- ✅ Coaching tip status management working correctly
- ✅ Status change controls functional and intuitive
- ✅ Visual indicators for tip status clear and appropriate
- ✅ Filtering by status and category operational
- ✅ Status changes persisting across dashboard sessions
- ✅ Tip content preservation verified
- ✅ Curation workflow integrated seamlessly with session detail view
- ✅ Trainer attribution for status changes tracked properly